# Example BeeGFS HA (High-Availability) cluster inventory file.

# The basic function for Ansible inventory files are to define host groups. Group variables can be placed in a YAML file that corresponds to the group's name in
#   the group_vars/ directory. Likewise, host variables can be placed in a YAML file that has its name in the host_vars/ directory. Note that the names used for
#   Ansible host names do not need to correspond to the systems actual hostname; these are references only for Ansible automation.

all:
  vars:
    ansible_python_interpreter: /usr/bin/python3
  children:


    # BeeGFS HA cluster resource Ansible group
    ha_cluster:
      children:

        # Define all resource groups here for the BeeGFS cluster. At minimum you must have a management, metadata, and storage group. Create a 'hosts'
        #   dictionary containing the cluster node names you wish to be included in the resource group.

        # Notes:
        #   - The resource group's name can only be a maximum of 15 characters (including the interface name) because the resource group is used to name the floating ip resource iflabel.
        #     * Step 3 in beegfs_ha_7_2 readme will prompt you to select the BeeGFS service (management, metadata, storage) you'd like the resource group to
        #         manage. Note that there can only be one management group.
        #   - The host names are used for the BeeGFS HA cluster node names (i.e. node_mm1, node_mm2). These names can be changed to whatever you'd like the nodes to be named.
        #   - The order of the cluster nodes in the hosts dictionary determines the resource's preference for the host, starting with the highest preference.


        # BeeGFS HA Management Resource Group - There can only be one BeeGFS HA management resource group; however, you can list as management failover hosts you'd like under hosts.
        # -----------------------------------
        mgmt:     # Management resource name - mgmt (unless changes) will be used to define Pacemaker resource group.
          hosts:  # Within each BeeGFS Pacemaker resource group you can define 1 or more nodes beginning with the highest preference.
            node_mm1:   # Most preferred BeeGFS management node. If everything is running correctly then your BeeGFS management service will be running on node_mm1.
            node_mm2:   # Next preferred node. If something happens to node_mm1 then Pacemaker will migrate the BeeGFS management service to node_mm2.
            #node_mmX:  # Any additional nodes you add to this list will only have the BeeGFS management service if all its preceding nodes fail.


        # BeeGFS HA Metadata Resource Groups - List all the BeeGFS HA metadata resource groups in this section.
        # ----------------------------------
        md_01:  # Metadata resource group. md_01 will be used to define a Pacemaker resource group.
                  #    Metadata resource names must end with and underscore followed by the nodeNumID that is designated for the service resource.
          hosts:
            node_mm1:   # Most preferred BeeGFS metadata node. If everything is running correctly then your BeeGFS metadata service (meta_01) will be running on node_mm1.
            node_mm2:   # Next preferred node. If something happens to node_mm1 then Pacemaker will migrate the BeeGFS metadata service (meta_01) to node_mm2.
            #node_mmX:  # Any additional nodes you add to this list will only have the BeeGFS metadata service (md_01) if all its preceding nodes fail.

        md_02:  # Refer to comments in md_01 resource.
          hosts:
            node_mm2:
            node_mm1:

        # Add any additional metadata resource groups here (i.e. md_03, ..., md_xx)


        # BeeGFS HA Storage Resource Groups - List all the BeeGFS HA storage resource groups in this section.
        # ---------------------------------
        st_01:  # Storage resource group. st_01 will be used to define a Pacemaker resource group.
                  #    Storage resource names must end with and underscore followed by the nodeNumID that is designated for the service resource.
          hosts:
            node_ss1:   # Most preferred BeeGFS storage node. If everything is running correctly then your BeeGFS storage service (st_01) will be running on node_ss1.
            node_ss2:   # Next preferred node. If something happens to node_mm1 then Pacemaker will migrate the BeeGFS storage service (st_01) to node_ss2.
            #node_ssX:  # Any additional nodes you add to this list will only have the BeeGFS storage service (st_01) if all its preceding nodes fail.

        st_02:  # Refer to comments in st_01 resource.
          hosts:
            node_ss2:
            node_ss1:

        # Add any additional metadata resource groups here (i.e. st_03, ..., st_xx)

    # NetApp E-Series storage systems Ansible group
    eseries_storage_systems:
      hosts:

        # Define all E-Series storage targets here used by the BeeGFS cluster.
        eseries_storage_system_01:
        #eseries_storage_system_0X: # Any additional storage targets in use by the BeeGFS cluster.
