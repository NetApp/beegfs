# This is an example inventory file that contains all the example variable definitions rather than separating
all:
  vars:
    ansible_python_interpreter: /usr/bin/python
  children:

    eseries_storage_systems:
      hosts:
        eseries_storage_system_01:

    ha_cluster:
      vars:
        beegfs_ha_ansible_host_group: ha_cluster
        beegfs_ha_ansible_storage_group: eseries_storage_systems
        beegfs_ha_cluster_name: hacluster
        beegfs_ha_cluster_username: hacluster
        beegfs_ha_cluster_password: hapassword
        beegfs_ha_mgmtd_floating_ip: 192.168.1.230
        filter_ip_ranges:
          - 192.168.2.0/24
          - 192.168.3.0/24
        beegfs_ha_alert_email_list: ["jack@example.com", "jill@example.com"]
        beegfs_ha_fencing_agents:
          fence_vmware_rest: # Each entry is name fence_vmware_rest_X where X is the ordered list index.
            - pcmk_host_map: "node_mm1:vm_node_mm1;node_mm2:vm_node_mm2;node_ss1:vm_node_ss1;node_ss2:vm_node_ss2"
              ipaddr: 192.168.4.10
              ssl: 1
              ssl_insecure: 1
              login: example@vsphere.local
              passwd: vspherepass
      children:
        mgmt: # Resource Group - NOTE: must be 12 characters or less because the resource group is used to name the floating ip resource iflabel.
          hosts:
            node_mm1:  # Lists are ordered with the highest priority first.
            node_mm2:
          vars:
            port: 8008
            floating_ips:  # These need to account for all hosts in resource group.
              - "eth1:192.168.2.230/24"
              - "eth2:192.168.3.231/24"
            beegfs_service: management
            beegfs_targets:  # This should never be more than one volume but if there is then only the first will be selected
              eseries_storage_system_01:
                eseries_storage_pool_configuration:
                  - name: mgmt_meta_01_02   # NOTE: This name is required to allow multiple services to use the same volume group/storage pool.
                    raid_level: raid1
                    criteria_drive_count: 2
                    volumes:
                      - size: 10

        meta_01:
          hosts:
            node_mm2:
            node_mm1:
          vars:
            port: 8005
            floating_ips:
              - "eth1:192.168.2.232/24"
              - "eth2:192.168.3.233/24"
            beegfs_service: metadata
            beegfs_targets:
              eseries_storage_system_01:
                eseries_storage_pool_configuration:
                  - name: mgmt_meta_01_02
                    raid_level: raid1
                    criteria_drive_count: 2
                    volumes:
                      - size: 100

        meta_02:
          hosts:
            node_mm1:
            node_mm2:
          vars:
            port: 8045
            floating_ips:
              - "eth1:192.168.2.234/24"
              - "eth2:192.168.3.235/24"
            beegfs_service: metadata
            beegfs_targets:
              eseries_storage_system_01:
                eseries_storage_pool_configuration:
                  - name: mgmt_meta_01_02
                    raid_level: raid1
                    criteria_drive_count: 2
                    volumes:
                      - size: 100

        stor_01:
          hosts:
            node_ss1:
            node_ss2:
          vars:
            port: 8012
            floating_ips:
              - "eth1:192.168.2.236/24"
              - "eth2:192.168.3.237/24"
            beegfs_service: storage
            beegfs_targets:
              eseries_storage_system_01:
                eseries_storage_pool_configuration:
                  - raid_level: raid6
                    criteria_drive_count: 10
                    volumes:
                      - size: 2048
                      - size: 2048
                      - size: 2048
                      - size: 2048
                  - raid_level: raid6
                    criteria_drive_count: 10
                    volumes:
                      - size: 2048
                      - size: 2048
                      - size: 2048
                      - size: 2048

        stor_02:
          hosts:
            node_ss1:
            node_ss2:
          vars:
            port: 8050
            floating_ips:
              - "eth1:192.168.2.238/24"
              - "eth2:192.168.3.239/24"
            beegfs_service: storage
            beegfs_targets:
              eseries_storage_system_01:
                eseries_storage_pool_configuration:
                  - raid_level: raid6
                    criteria_drive_count: 10
                    volumes:
                      - size: 2048
                      - size: 2048
                      - size: 2048
                      - size: 2048
                  - raid_level: raid6
                    criteria_drive_count: 10
                    volumes:
                      - size: 2048
                      - size: 2048
                      - size: 2048
                      - size: 2048
